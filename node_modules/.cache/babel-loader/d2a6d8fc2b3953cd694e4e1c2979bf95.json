{"ast":null,"code":"import _objectSpread from \"/home/karol/Desktop/Zajecia Frontend/styczen-12/jfdz12-materialy-rest/rest-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/karol/Desktop/Zajecia Frontend/styczen-12/jfdz12-materialy-rest/rest-app/src/chat/Chat.js\";\nimport React from \"react\";\nimport { Message, Form } from \"semantic-ui-react\";\nimport PageWrapper from \"../components/PageWrapper\";\nimport firebase from \"firebase\";\nexport default class Chat extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      messages: [],\n      message: ''\n    };\n\n    this.handleOnChange = event => {\n      this.setState({\n        message: event.target.value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const userData = firebase.auth().currentUser;\n      const msgObj = {\n        author: userData.email,\n        text: this.state.message\n      };\n      fetch('https://rest-api-jfdz12.firebaseio.com/messages.json', {\n        method: 'POST',\n        body: JSON.stringify(msgObj)\n      });\n    };\n  }\n\n  componentDidMount() {\n    firebase.database().ref('messages').on('value', snapshot => {\n      const data = snapshot.val();\n      this.setState({\n        messages: Object.keys(data).map(el => _objectSpread({}, data[el], {\n          id: el\n        })) || []\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(PageWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(Auth, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, \"Chat\"), React.createElement(Form, {\n      onSubmit: this.handleOnSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, React.createElement(Form.Field, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.message,\n      onChange: this.handleOnChange,\n      placeholder: \"...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }))), this.state.messages.slice(-10).reverse().map(message => {\n      return React.createElement(Message, {\n        key: message.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, message.author), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, message.text));\n    })));\n  }\n\n}","map":{"version":3,"sources":["/home/karol/Desktop/Zajecia Frontend/styczen-12/jfdz12-materialy-rest/rest-app/src/chat/Chat.js"],"names":["React","Message","Form","PageWrapper","firebase","Chat","Component","state","messages","message","handleOnChange","event","setState","target","value","handleSubmit","preventDefault","userData","auth","currentUser","msgObj","author","email","text","fetch","method","body","JSON","stringify","componentDidMount","database","ref","on","snapshot","data","val","Object","keys","map","el","id","render","handleOnSubmit","slice","reverse"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,OAAR,EAAiBC,IAAjB,QAA4B,mBAA5B;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,QAAP,MAAqB,UAArB;AAGA,eAAe,MAAMC,IAAN,SAAmBL,KAAK,CAACM,SAAzB,CAAkC;AAAA;AAAA;AAAA,SAC7CC,KAD6C,GACrC;AACJC,MAAAA,QAAQ,EAAE,EADN;AAEJC,MAAAA,OAAO,EAAE;AAFL,KADqC;;AAAA,SAM7CC,cAN6C,GAM3BC,KAAD,IAAW;AACxB,WAAKC,QAAL,CAAc;AACVH,QAAAA,OAAO,EAAEE,KAAK,CAACE,MAAN,CAAaC;AADZ,OAAd;AAGH,KAV4C;;AAAA,SAY7CC,YAZ6C,GAY7BJ,KAAD,IAAW;AACtBA,MAAAA,KAAK,CAACK,cAAN;AAEA,YAAMC,QAAQ,GAAGb,QAAQ,CAACc,IAAT,GAAgBC,WAAjC;AACA,YAAMC,MAAM,GAAG;AACXC,QAAAA,MAAM,EAAEJ,QAAQ,CAACK,KADN;AAEXC,QAAAA,IAAI,EAAE,KAAKhB,KAAL,CAAWE;AAFN,OAAf;AAKAe,MAAAA,KAAK,CAAC,sDAAD,EAAyD;AAC1DC,QAAAA,MAAM,EAAE,MADkD;AAE1DC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,MAAf;AAFoD,OAAzD,CAAL;AAIH,KAzB4C;AAAA;;AA2B7CS,EAAAA,iBAAiB,GAAG;AAChBzB,IAAAA,QAAQ,CAAC0B,QAAT,GAAoBC,GAApB,CAAwB,UAAxB,EAAoCC,EAApC,CAAuC,OAAvC,EAAgDC,QAAQ,IAAI;AACxD,YAAMC,IAAI,GAAGD,QAAQ,CAACE,GAAT,EAAb;AACA,WAAKvB,QAAL,CAAc;AACVJ,QAAAA,QAAQ,EAAE4B,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkBI,GAAlB,CAAsBC,EAAE,sBAAUL,IAAI,CAACK,EAAD,CAAd;AAAoBC,UAAAA,EAAE,EAAED;AAAxB,UAAxB,KAA0D;AAD1D,OAAd;AAGH,KALD;AAMH;;AAEDE,EAAAA,MAAM,GAAG;AACL,WAAO,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACH,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EAEI,oBAAC,IAAD;AAAM,MAAA,QAAQ,EAAE,KAAKC,cAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AACI,MAAA,IAAI,EAAC,MADT;AAEI,MAAA,KAAK,EAAE,KAAKnC,KAAL,CAAWE,OAFtB;AAGI,MAAA,QAAQ,EAAE,KAAKC,cAHnB;AAII,MAAA,WAAW,EAAC,KAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,CAFJ,EAYQ,KAAKH,KAAL,CAAWC,QAAX,CAAoBmC,KAApB,CAA0B,CAAC,EAA3B,EAA+BC,OAA/B,GAAyCN,GAAzC,CAA6C7B,OAAO,IAAI;AACpD,aAAO,oBAAC,OAAD;AAAS,QAAA,GAAG,EAAEA,OAAO,CAAC+B,EAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI/B,OAAO,CAACY,MAAZ,CADG,EAEH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAIZ,OAAO,CAACc,IAAZ,CAFG,CAAP;AAIH,KALD,CAZR,CADG,CAAP;AAsBH;;AA3D4C","sourcesContent":["import React from \"react\";\nimport {Message, Form} from \"semantic-ui-react\"\nimport PageWrapper from \"../components/PageWrapper\";\nimport firebase from \"firebase\"\n\n\nexport default class Chat extends React.Component{\n    state = {\n        messages: [],\n        message: ''\n    };\n\n    handleOnChange = (event) => {\n        this.setState({\n            message: event.target.value\n        })\n    };\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n\n        const userData = firebase.auth().currentUser;\n        const msgObj = {\n            author: userData.email,\n            text: this.state.message\n        };\n\n        fetch('https://rest-api-jfdz12.firebaseio.com/messages.json', {\n            method: 'POST',\n            body: JSON.stringify(msgObj)\n        });\n    };\n\n    componentDidMount() {\n        firebase.database().ref('messages').on('value', snapshot => {\n            const data = snapshot.val();\n            this.setState({\n                messages: Object.keys(data).map(el => ({ ...data[el], id: el })) || []\n            })\n        })\n    }\n\n    render() {\n        return <PageWrapper>\n            <Auth>\n                <h1>Chat</h1>\n                <Form onSubmit={this.handleOnSubmit}>\n                    <Form.Field>\n                        <input\n                            type='text'\n                            value={this.state.message}\n                            onChange={this.handleOnChange}\n                            placeholder='...' />\n                    </Form.Field>\n                </Form>\n                {\n                    this.state.messages.slice(-10).reverse().map(message => {\n                        return <Message key={message.id}>\n                            <b>{message.author}</b>\n                            <p>{message.text}</p>\n                        </Message>\n                    })\n                }\n            </Auth>\n        </PageWrapper>\n    }\n}"]},"metadata":{},"sourceType":"module"}