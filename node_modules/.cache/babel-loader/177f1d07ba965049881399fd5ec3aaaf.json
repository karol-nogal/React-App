{"ast":null,"code":"import _objectSpread from \"/home/karol/Desktop/Zajecia Frontend/styczen-12/jfdz12-materialy-rest/rest-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/karol/Desktop/Zajecia Frontend/styczen-12/jfdz12-materialy-rest/rest-app/src/chat/Chat.js\";\nimport React from \"react\";\nimport { Message, Form } from \"semantic-ui-react\";\nimport PageWrapper from \"../components/PageWrapper\";\nimport firebase from \"firebase\";\nexport default class Chat extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      messages: [],\n      message: ''\n    };\n\n    this.handleOnChange = event => {\n      this.setState({\n        message: event.target.value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const userData = firebase.auth().currentUser;\n      const msgObj = {\n        author: userData.email,\n        text: this.state.message\n      };\n      fetch('https://rest-api-jfdz12.firebaseio.com/messages.json', {\n        method: 'POST',\n        body: JSON.stringify(msgObj)\n      });\n    };\n  }\n\n  componentDidMount() {\n    firebase.database().ref('messages').on('value', snapshot => {\n      const data = snapshot.val();\n      this.setState({\n        messages: Object.keys(data).map(el => _objectSpread({}, data[el], {\n          id: el\n        })) || []\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(PageWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: (this, handleSubmit),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(Form.Field, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }))), this.state.messages.map(messages => {\n      return React.createElement(Message, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"Karol\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \"asdasasdasda\"));\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/karol/Desktop/Zajecia Frontend/styczen-12/jfdz12-materialy-rest/rest-app/src/chat/Chat.js"],"names":["React","Message","Form","PageWrapper","firebase","Chat","Component","state","messages","message","handleOnChange","event","setState","target","value","handleSubmit","preventDefault","userData","auth","currentUser","msgObj","author","email","text","fetch","method","body","JSON","stringify","componentDidMount","database","ref","on","snapshot","data","val","Object","keys","map","el","id","render"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,OAAR,EAAiBC,IAAjB,QAA4B,mBAA5B;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,eAAe,MAAMC,IAAN,SAAmBL,KAAK,CAACM,SAAzB,CAAkC;AAAA;AAAA;AAAA,SAC7CC,KAD6C,GACrC;AACJC,MAAAA,QAAQ,EAAE,EADN;AAEJC,MAAAA,OAAO,EAAE;AAFL,KADqC;;AAAA,SAM7CC,cAN6C,GAM3BC,KAAD,IAAW;AACxB,WAAKC,QAAL,CAAc;AACVH,QAAAA,OAAO,EAAEE,KAAK,CAACE,MAAN,CAAaC;AADZ,OAAd;AAGH,KAV4C;;AAAA,SAY7CC,YAZ6C,GAY7BJ,KAAD,IAAW;AACtBA,MAAAA,KAAK,CAACK,cAAN;AAEA,YAAMC,QAAQ,GAAGb,QAAQ,CAACc,IAAT,GAAgBC,WAAjC;AACA,YAAMC,MAAM,GAAG;AACXC,QAAAA,MAAM,EAAEJ,QAAQ,CAACK,KADN;AAEXC,QAAAA,IAAI,EAAE,KAAKhB,KAAL,CAAWE;AAFN,OAAf;AAKAe,MAAAA,KAAK,CAAC,sDAAD,EAAyD;AAC1DC,QAAAA,MAAM,EAAE,MADkD;AAE1DC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,MAAf;AAFoD,OAAzD,CAAL;AAIH,KAzB4C;AAAA;;AA2B7CS,EAAAA,iBAAiB,GAAG;AAChBzB,IAAAA,QAAQ,CAAC0B,QAAT,GAAoBC,GAApB,CAAwB,UAAxB,EAAoCC,EAApC,CAAuC,OAAvC,EAAgDC,QAAQ,IAAI;AACxD,YAAMC,IAAI,GAAGD,QAAQ,CAACE,GAAT,EAAb;AACA,WAAKvB,QAAL,CAAc;AACVJ,QAAAA,QAAQ,EAAE4B,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkBI,GAAlB,CAAsBC,EAAE,sBAAUL,IAAI,CAACK,EAAD,CAAd;AAAoBC,UAAAA,EAAE,EAAED;AAAxB,UAAxB,KAA0D;AAD1D,OAAd;AAGH,KALD;AAMH;;AAEDE,EAAAA,MAAM,GAAE;AACJ,WACI,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AAAM,MAAA,QAAQ,GAAE,MAAK1B,YAAP,CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,CADJ,EASQ,KAAKR,KAAL,CAAWC,QAAX,CAAoB8B,GAApB,CAAwB9B,QAAQ,IAAE;AAC9B,aACI,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADA,EAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFA,CADJ;AAMH,KAPD,CATR,CADJ;AAuBH;;AA5D4C","sourcesContent":["import React from \"react\";\nimport {Message, Form} from \"semantic-ui-react\"\nimport PageWrapper from \"../components/PageWrapper\";\nimport firebase from \"firebase\"\nexport default class Chat extends React.Component{\n    state = {\n        messages: [],\n        message: ''\n    };\n\n    handleOnChange = (event) => {\n        this.setState({\n            message: event.target.value\n        })\n    };\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n\n        const userData = firebase.auth().currentUser;\n        const msgObj = {\n            author: userData.email,\n            text: this.state.message\n        };\n\n        fetch('https://rest-api-jfdz12.firebaseio.com/messages.json', {\n            method: 'POST',\n            body: JSON.stringify(msgObj)\n        });\n    };\n\n    componentDidMount() {\n        firebase.database().ref('messages').on('value', snapshot => {\n            const data = snapshot.val();\n            this.setState({\n                messages: Object.keys(data).map(el => ({ ...data[el], id: el })) || []\n            })\n        })\n    }\n\n    render(){\n        return(\n            <PageWrapper>\n                <Form onSubmit={this,handleSubmit}>\n                    <Form.Field>\n                        <input></input>\n                    </Form.Field>\n                </Form>\n\n\n                {\n                    this.state.messages.map(messages=>{\n                        return(\n                            <Message>\n                            <b>Karol</b>\n                            <p>asdasasdasda</p>\n                        </Message>\n                        )\n                    })\n                }\n                    \n            </PageWrapper>\n            \n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}